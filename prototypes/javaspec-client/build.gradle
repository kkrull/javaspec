//Code that uses JavaSpec's API to write specs
plugins {
  id 'java'
  id 'com.adarshr.test-logger' version '3.0.0'
}

group 'info.javaspec'
version '0.0.1'

dependencies {
  testImplementation project(':javaspec-api')
  testImplementation 'org.junit.platform:junit-platform-commons:1.8.1'

  testRuntimeOnly project(':javaspec-engine')
  testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'
}

repositories {
  mavenCentral()
}

test {
  useJUnitPlatform {
    includeEngines 'javaspec-engine'
  }

  include '**/*Specs*'

  //Show output from the engine and the specs
  onOutput { _descriptor, engineEvent ->
    logger.lifecycle(engineEvent.message.trim())
  }

//  testLogging.showStandardStreams = true //Only shows output from the specs themselves
}

//https://github.com/radarsh/gradle-test-logger-plugin
//TODO KDK: Shows "UnknownClass" when running GreeterSpecs (also in HTML report)
testlogger {
  theme 'mocha'
}
