//Conventions for Java projects that publish Maven artifacts
plugins {
	id 'maven-publish'
}

interface MavenPublishConventionExtension {
	Property<String> getPublicationDescription();
	Property<String> getPublicationName();
}

//https://docs.gradle.org/current/userguide/publishing_maven.html
def extension = project.extensions.create('localMavenPublishConvention', MavenPublishConventionExtension)
publishing {
	publications {
		maven(MavenPublication) {
			pom {
				//Support deferred configuration
				//https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven:deferred_configuration
				afterEvaluate {
					description = extension.publicationDescription.get()
					name = extension.publicationName.get()
				}

				developers {
					developer {
						id = 'kkrull'
						name = 'Kyle Krull'
					}
				}

				issueManagement {
					system = 'GitHub'
					url = 'https://github.com/kkrull/javaspec/issues'
				}

				scm {
					connection = 'scm:git:git://github.com/kkrull/javaspec.git'
					developerConnection = 'scm:git:git@github.com:kkrull/javaspec.git'
					url = 'https://github.com/kkrull/javaspec'
				}

				url = 'https://javaspec.info'
			}
		}
	}
}
